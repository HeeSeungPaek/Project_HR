<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.olive.attendance.dao.AttendanceDao">
 <!-- (insert) 
	 <insert id="insert" parameterType="com.olive.dto.Att_Record">	 
	 	INSERT INTO Calendar(STARTDATE, ENDDATE, CONTEXT) 
	 	VALUES(#{startdate}, #{enddate}, #{context})
	 </insert> 
-->


<!-- 휴가관리 캘린더 테스트  -->
	<!--  <select id="getcalendarList" resultType="com.olive.dto.Att_Record">
	 
	 </select> -->
<!-- 근태관리  캘린더 테스트  -->
	 <select id="gettableList" resultType="com.olive.dto.Att_Record">
		select a.attname as title , ar.starttime as start, ar.endtime as end,color FROM Att_Record ar join ATTENDANCE a ON ar.ATTCODE =a.ATTCODE where empno = #{empno};
	 </select>
	 
 <!-- 출근버튼 -->
 	<update id="startwork" parameterType ="com.olive.dto.Att_Record">	 
		update ATT_RECORD  set attcode = #{attCode}, starttime = now() where  empno = #{empNo} 
	</update> 
 <!-- 퇴근버튼 -->
 	<update id="endwork" parameterType ="com.olive.dto.Att_Record">	 
		update ATT_RECORD  set attcode = #{attCode}, endtime = now() where  empno = #{empNo} 
	</update> 
<!-- 출/퇴근 select -->
	<select id="getcalendarList" resultType="com.olive.dto.Att_Record">
	select e.ename, e.empno, d.deptname, r.starttime, r.endtime 
	from emp as e join att_record as r on e.empno = r.empno 
	join dept as d on e.deptCode = d.deptCode
	where e.empno = #{empno};
	</select>
	
</mapper>